import { Canvas, Meta, Controls, Story } from '@storybook/addon-docs/blocks';
import * as ButtonStories from './Button.stories';

<Meta of={ButtonStories} />

# Button

Buttons are interactive elements that trigger actions when clicked. They come in multiple variants and sizes to establish visual hierarchy and indicate the importance of different actions.

<Canvas of={ButtonStories.Default} />

<Controls of={ButtonStories.Default} />

## Overview

The Button component is the primary way users trigger actions in your application. It provides multiple visual variants to establish hierarchy and meaning, supports loading states for async operations, and follows accessibility best practices.

## When to Use

### Use Button when:

- **Primary actions**: Submit forms, confirm dialogs, complete workflows
- **Triggering operations**: Save, delete, send, create actions
- **Navigation**: Moving to next steps in multi-step processes
- **Call-to-action**: Encouraging users to take important actions
- **Form submission**: Submit, save, or send form data

### Don't use Button when:

- **Page navigation**: Use Link component for navigation between pages
- **Toggling state**: Use Switch or Toggle component instead
- **Multiple selections**: Use Checkbox or multi-select dropdown
- **Simple text links**: Use anchor tags for inline links in paragraphs
- **Opening menus**: Use DropdownMenu component instead

## Variants

### Primary Variant

The main call-to-action button with the highest visual weight. Use for the most important action on the page.

<Canvas of={ButtonStories.Primary} />

### Secondary Variant

Alternative actions that are less important than the primary action but still significant.

<Canvas of={ButtonStories.Secondary} />

### Outline Variant

Tertiary actions with minimal visual weight. Good for cancel buttons or optional actions.

<Canvas of={ButtonStories.Outline} />

### Ghost Variant

Minimal emphasis for the least important actions. Often used in tables or compact UIs.

<Canvas of={ButtonStories.Ghost} />

### Danger Variant

Destructive or risky actions requiring confirmation. Always use with a confirmation dialog.

<Canvas of={ButtonStories.Danger} />

## Sizes

Buttons support three sizes to fit different contexts and establish visual hierarchy.

### Small (sm)

For tight spaces, table actions, and compact forms.

<Canvas of={ButtonStories.Small} />

### Medium (md)

Default size for most use cases. Provides good balance between visibility and space efficiency.

<Canvas of={ButtonStories.Default} />

### Large (lg)

For primary CTAs, marketing pages, and prominent actions that need extra emphasis.

<Canvas of={ButtonStories.Large} />

## States

### Loading State

Shows a spinner when performing async operations. Prevents double-clicks and communicates progress.

<Canvas of={ButtonStories.Loading} />

### Disabled State

Prevents interaction when an action is not available or conditions aren't met.

<Canvas of={ButtonStories.Disabled} />

## Real World Examples

See practical examples of buttons in common use cases.

<Canvas of={ButtonStories.RealWorldExamples} />

## Accessibility

The Button component follows WCAG 2.1 guidelines and implements the following accessibility features:

- **Keyboard Support**: Fully accessible via Enter and Space keys
- **Focus Visible**: Clear focus ring on keyboard navigation (meets WCAG 2.1 AA)
- **ARIA Labels**: Support for `aria-label` on icon-only buttons
- **Loading State**: Appropriate ARIA attributes during async operations
- **Disabled State**: Properly communicated to screen readers
- **Color Contrast**: All variants meet WCAG 2.1 AA contrast requirements
- **Touch Targets**: Minimum 44x44px for mobile accessibility

### ARIA Support

For icon-only buttons, always provide an accessible label:

```tsx
<Button aria-label="Delete user">
  <TrashIcon />
</Button>
```

### Loading State Accessibility

The loading state automatically includes appropriate ARIA attributes to communicate the button's state to assistive technologies.

## Best Practices

### Do

- Use action-oriented labels that describe what will happen ("Save changes", "Delete user", "Send email")
- Limit to one primary button per screen or section for the main action
- Match button size to surrounding elements and importance
- Include loading states for asynchronous actions
- Provide feedback when action completes (toast, redirect, etc.)
- Use danger variant for destructive actions with confirmation dialogs
- Keep labels concise (1-3 words when possible)
- Place buttons consistently (primary actions on the right, secondary on the left)

### Don't

- Use generic labels like "Click here", "Submit", or "OK" without context
- Place multiple primary buttons competing for attention
- Use buttons for navigation to different pages (use Link)
- Rely on color alone to convey meaning (include icons or text)
- Make buttons too small (minimum 44x44px for touch targets)
- Use danger variant without confirmation for destructive actions
- Nest buttons inside other clickable elements
- Disable buttons without explaining why (use helper text)

## Common Mistakes

1. **Using buttons for navigation**: Buttons are for actions. For routing/navigation, use the Link component
2. **Missing loading states**: Async actions should show loading state to prevent double-clicks
3. **No confirmation on destructive actions**: Always confirm before delete/remove operations
4. **Icon-only without labels**: Always provide `aria-label` for icon-only buttons
5. **Too many variants on one screen**: Stick to 2-3 button variants per view for clarity
6. **Generic button text**: "Submit" or "OK" doesn't tell users what will happen
7. **Primary button overuse**: Having multiple primary buttons reduces their effectiveness

## API Reference

### Button Props

| Prop | Type | Default | Description |
|------|------|---------|-------------|
| `variant` | `'primary' \| 'secondary' \| 'outline' \| 'ghost' \| 'danger'` | `'primary'` | Visual style that indicates button importance and meaning |
| `size` | `'sm' \| 'md' \| 'lg'` | `'md'` | Button size for different contexts |
| `isLoading` | `boolean` | `false` | Shows loading spinner for async operations |
| `disabled` | `boolean` | `false` | Disables button interaction |
| `onClick` | `() => void` | - | Function called when button is clicked |
| `children` | `ReactNode` | - | Button label text or content |
| `className` | `string` | - | Additional CSS classes |
| `type` | `'button' \| 'submit' \| 'reset'` | `'button'` | HTML button type |
| `aria-label` | `string` | - | Accessible label for icon-only buttons |

### Usage Examples

#### Basic Button

```tsx
import { Button } from '@/components';

function MyForm() {
  return (
    <Button variant="primary" onClick={() => console.log('Clicked')}>
      Save Changes
    </Button>
  );
}
```

#### Form Submit Button

```tsx
<form onSubmit={handleSubmit}>
  <Input label="Email" type="email" />
  <Input label="Password" type="password" />
  <Button type="submit" variant="primary">
    Sign In
  </Button>
</form>
```

#### With Loading State

```tsx
function SaveButton() {
  const [isLoading, setIsLoading] = React.useState(false);

  const handleSave = async () => {
    setIsLoading(true);
    try {
      await saveData();
    } finally {
      setIsLoading(false);
    }
  };

  return (
    <Button variant="primary" isLoading={isLoading} onClick={handleSave}>
      Save Changes
    </Button>
  );
}
```

#### Destructive Action with Confirmation

```tsx
function DeleteButton() {
  const handleDelete = () => {
    if (confirm('Are you sure you want to delete this user?')) {
      deleteUser();
    }
  };

  return (
    <Button variant="danger" onClick={handleDelete}>
      Delete User
    </Button>
  );
}
```

#### Icon-Only Button

```tsx
<Button variant="ghost" aria-label="Settings">
  <SettingsIcon />
</Button>
```

#### Button Group with Hierarchy

```tsx
<div className="flex gap-3">
  <Button variant="outline">Cancel</Button>
  <Button variant="primary">Save Changes</Button>
</div>
```

#### Different Sizes

```tsx
<Button size="sm">Small Action</Button>
<Button size="md">Medium Action</Button>
<Button size="lg">Large CTA</Button>
```

## Related Components

- **Link** - For navigation between pages
- **DropdownMenu** - For menus with multiple actions
- **Toast** - For feedback after button actions
- **Dialog** - For confirmations before destructive actions
- **Switch** - For toggling boolean states
